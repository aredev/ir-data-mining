{% extends 'detailpage.html' %}

{% block header %}

<h1 class="property__title">{{author.name}}</h1>

<div class="property__plan">
    <dl class="property__plan-item">
        <dt class="property__plan-icon">
           <i class="fa fa-file-text" aria-hidden="true"></i>
        </dt>
        <dd class="property__plan-title">Pagerank</dd>
        <dd class="property__plan-value">{{author.pagerank}}</dd>
    </dl>
    <dl class="property__plan-item">
        <dt class="property__plan-icon">
            <i class="fa fa-header" aria-hidden="true"></i>
        </dt>
        <dd class="property__plan-title">H-index</dd>
        <dd class="property__plan-value">{{author.h_index}}</dd>
    </dl>
</div>

{% endblock %}

{% block details %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css">


<style type="text/css">
    #mynetwork {
        width: 600px;
        height: 400px;
        border: 1px solid lightgray;
    }
</style>

<ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#home">Publications</a></li>
    <li><a data-toggle="tab" href="#menu1">Suggested authors</a></li>
</ul>

<div class="tab-content">
    <div id="home" class="tab-pane fade in active">
        <table class="table" style="width:100%" id="publications">
            <thead>
            <tr>
                <th>Title</th>
                <th>Year</th>
                <th>Download</th>
            </tr>
            </thead>
            <tbody>
            {% for publication in author.papers.all %}
            <tr>
                <td><a href="/paper/{{publication.id}}">{{publication.title}}</a></td>
                <td><a href="/year/{{publication.year}}">{{publication.year}}</a></td>
                <td><a href="http://papers.nips.cc/paper/{{publication.pdf_name}}">Click here</a></td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <div id="menu1" class="tab-pane fade">
        <div id="mynetwork"></div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>

<script type="text/javascript">
    // create an array with nodes
    var nodes = new vis.DataSet([
        {id: 0, label: '{{author.name}}'},
        {% for sa in author.suggested_authors.all %}
            {id: {{sa.suggested_author.id}}, label: '{{sa.suggested_author.name}}'},
        {% endfor %}
    ]);

    {% load humanize %}


    // create an array with edges
    var edges = new vis.DataSet([
        {% for sa in author.suggested_authors.all %}
            {from: 0, to: {{sa.suggested_author.id}}, label: '{{sa.similarity|floatformat:4}}' },
        {% endfor %}
    ]);

    // create a network
    var container = document.getElementById('mynetwork');

    // provide the data in the vis format
    var data = {
        nodes: nodes,
        edges: edges
    };
    var options = {};

    // initialize your network!
    var network = new vis.Network(container, data, options);

    $(document).ready(function(){
        $('#publications').DataTable();
    });

</script>

{% endblock %}
